# GAME_SPEC.md

## Spec Version
- **Version:** v0.9.0
- **Project:** Synergy Turn Card Battle
- **Owner Role:** Producer (Game Designer)
- **Language:** Korean
- **Last Updated:** 2026-02-13

## 1) Design Goal
v0.9는 v0.8의 카드 다양성 위에서 **단일 시너지 축(Flame/Leaf/Gear/Void)만으로도 최종 라운드 진입이 가능한 밸런스**를 목표로 한다.
핵심은 단일 문양 운영의 안정성을 높이는 시너지 보정과 시너지-연동 카드 효과 강화다.

## 2) Scope

### Scope In (v0.9)
- 상태 머신 유지:
  - `ready`
  - `planning`
  - `playerTurn`
  - `enemyTurn`
  - `resolution`
  - `deckBuild`
  - `gameOver`
  - `runComplete`
- 단일 시너지 완주 보정 시스템:
  - 문양 2스택 시 기본 시너지 수치 상향.
  - 같은 문양 3회 사용 시 문양별 버스트 1회 발동.
- 카드 밸런스 조정(기존 카드 수치/효과 업데이트 + 적 HP 곡선 완화):
  - Leaf 생존 라인 강화.
  - Gear 템포 라인 강화.
  - Void 역전 라인 강화.
  - `카이오스 잭팟`의 시너지-연동 보상 강화.
- 적 아키타입 HP를 전체적으로 낮춰 단일 시너지 운용의 완주 확률 보정.

### Scope Out (v0.9)
- 저장/상점/맵 분기/멀티플레이.
- 영구 메타 성장.
- 카드 업그레이드 단계.

## 3) Core Battle Rules
- 플레이어 HP: 84
- 에너지: 턴당 3
- 드로우: 턴 시작 5
- 손패 최대: 8
- 방어도: 턴 시작 시 0
- 취약(`vulnerable`)은 턴 시작 시 1 감소
- 동시 KO: 패배
- 런 길이: 5라운드

## 4) Card System
카드 필수 필드:
- `id`, `name`, `family`, `type`, `energyCost`, `baseValue`, `sigil`, `image`, `effect[]`, `description`

문양(`sigil`): Flame / Leaf / Gear / Void

밸런스 조정 카드:
- Leaf 라인: `C003` 공격 6→8, `C006` 방어 8→11, `C013` 회복 5→6, `C016` 방어/가시 상향 + 공격 4 추가, `C024` 조건부 추가 공격 6 부여
- Gear 라인: `C004` 공격 6→8, `C015` 에너지 1 + 드로우 1로 변경, `C022` 기본/연계 피해 상향(5→7, 6→8)
- Void 라인: `C005` 공격/흡혈 상향(6→8, 2→3), `C012` 피해 12→14, `C018` 피해 7→9, `C026` 의도 일치 추가타 6→8
- Flame 라인: `C009` 공격 강화 +4→+5, `C033` 활성 시너지 기반 보정 보상 강화

## 5) Synergy & Burst Rules
- 동일 문양 2회 이상 사용 시 시너지 활성.
- Flame: 공격 추가 +6
- Leaf: 방어 추가 +6
- Gear: 드로우 +1
- Void: 공격 추가 +4 + 공격 시 흡혈 2
- 같은 문양 3회 사용 시 문양 버스트 1회 발동:
  - Flame 버스트: 추가 피해 16
  - Leaf 버스트: 방어 16 + 회복 8
  - Gear 버스트: 에너지 2 + 드로우 3
  - Void 버스트: 피해 12 + 취약 2
- 풀스펙트럼(4문양): 점수 +40, 턴 점수 배수 ON
- 콤보 4: 프리즘 버스트(피해 8 + 방어 8 + 점수 20)
- 서로 다른 시너지 2개: 아드레날린(+1 에너지, +1 드로우, 점수 12)

## 6) Enemy Intent Rule
- `planning` 상태에서 적이 다음 사용할 카드 의도를 확정.
- UI에 적 의도 텍스트를 표시.
- 플레이어는 의도 기반 대응 카드를 사용할 수 있다.

## 7) Deck Build Rule
- 라운드 승리 후 `deckBuild` 진입.
- 순서:
  1. 보상 카드 선택 또는 건너뛰기.
  2. 덱에서 카드 0~1장 제거.
  3. 다음 라운드 진입.
- 제거는 덱이 5장 이하일 때 금지.

## 8) Score Rules
- 플레이어 공격 카드 사용: +10
- 플레이어 스킬 카드 사용: +8
- 문양 버스트 발동: +15
- 라운드 승리: +100
- 고체력(HP 40+) 승리: +30
- 덱 정리(카드 제거) 성공: +6
- 런 클리어: +200
- 패배: 최종 점수 0

## 9) Iteration Loop Policy
- 신규 기능 루프: Producer → Engineer → QA → Docs → PR
- 스펙 변경 루프(버전 업): 상태/카드/공식 중 2개 이상 동시 변경 시 실행
- 버그 수정 루프: 스펙 변경 없이 QA ↔ Engineer 반복

## 10) Required Files
- `index.html`
- `style.css`
- `game.js`

## Change Log

### v0.9.0 (2026-02-13)
- 단일 시너지 완주 보정을 위해 시너지 수치(Flame/Leaf/Void)를 상향.
- 동일 문양 3회 사용 시 문양별 버스트를 추가.
- 카드 14장(C003/C004/C005/C006/C009/C012/C013/C015/C016/C018/C022/C024/C026/C033) 밸런스를 조정.
- 적 아키타입 체력 곡선을 하향 조정하고 플레이어 기본 체력을 84로 상향.
- 런 길이를 6라운드에서 5라운드로 조정.
- 점수 규칙에 문양 버스트 보너스(+15)를 추가.

### v0.8.0 (2026-02-13)
- 카드 도감을 메인 화면 내 리스트에서 `codex.html` 별도 페이지로 분리.
- 전투 UI에 `최근 사용 카드 12개` 히스토리 패널을 추가.
- 카드 풀을 34장(C032~C034 추가)으로 확장.
- 신규 효과 2종(`rewind`, `gamble`) 추가.

### v0.7.0 (2026-02-13)
- 카드 풀을 31장으로 확장(C027~C031 추가).
- 특이 효과 3종(`ifEnemyHpBelow`, `convertBlockToDamage`, `discover`) 추가.
- `deckBuild` 단계에 보상 건너뛰기/카드 제거 흐름 추가.
- 카드 도감 UI 추가 및 카드 설명 필드(`description`) 도입.
- 점수 규칙에 덱 정리 보너스(+6) 추가.

### v0.6.0 (2026-02-13)
- 상태 머신에 `planning` 상태를 추가.
- 적 의도 공개/반전 시스템 도입.
- 신규 카드 2장(C025~C026) 추가.
- 엔진/렌더링/데이터 모듈 분리로 유지보수 구조 개선.

### v0.5.0 (2026-02-13)
- `family` 시스템 및 신규 카드 4장(C021~C024) 추가.
